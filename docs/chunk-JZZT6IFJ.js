import{d as tt,e as et}from"./chunk-WYWT2BQY.js";import{e as h}from"./chunk-OG6FB7UE.js";import"./chunk-CVQSUTNI.js";import{a as nt}from"./chunk-GYHUSJRQ.js";import{g as H,h as Q,i as A,j as G,k as J,l as K,m as y,n as U,o as W,p as X}from"./chunk-KYOJ4JUR.js";import{$ as w,Aa as T,Ab as Y,Bb as Z,Ca as $,Da as j,F as m,J as C,La as q,M as O,Ma as F,N as P,Oa as z,Pa as b,Q as f,Ra as V,Sa as R,Y as p,Ya as D,Z as a,_ as r,_a as M,da as B,ea as v,fa as k,ga as x,ha as l,oa as L,p as S,sa as c,ta as I,u as g,ua as d,v as _,ya as E,za as N}from"./chunk-IV62SXZ6.js";var at=()=>[1,2,3,4,5],rt=i=>["/book",i];function ct(i,e){if(i&1&&(B(0),a(1,"mat-icon",12),c(2),r(),v()),i&2){let t=e.$implicit,n=l().$implicit;m(2),d(" ",n.ratings.average_rating>=t?"star":n.ratings.average_rating>=t-.5?"star_half":"star_border"," ")}}function mt(i,e){if(i&1){let t=k();a(0,"button",17),x("click",function(){g(t);let o=l(2).$implicit,s=l();return _(s.removeBook(o))}),a(1,"mat-icon"),c(2,"delete"),r()()}}function lt(i,e){if(i&1){let t=k();B(0),a(1,"button",13),x("click",function(){g(t);let o=l().$implicit,s=l();return _(s.decrementBook(o))}),a(2,"mat-icon"),c(3,"remove"),r()(),a(4,"span",14),c(5),r(),a(6,"button",15),x("click",function(){g(t);let o=l().$implicit,s=l();return _(s.incrementBook(o))}),a(7,"mat-icon"),c(8,"add"),r()(),f(9,mt,3,0,"button",16),v()}if(i&2){let t=l().$implicit,n=l();m(5),I(n.getBookQuantity(t)),m(4),p("ngIf",n.getBookQuantity(t)>0)}}function st(i,e){if(i&1){let t=k();a(0,"button",18),x("click",function(){g(t);let o=l().$implicit,s=l();return _(s.addToCart(o))}),c(1,"Add to Cart"),r()}}function pt(i,e){if(i&1&&(a(0,"mat-card",3)(1,"mat-card-title"),c(2),r(),a(3,"mat-card-subtitle"),c(4),r(),w(5,"img",4),a(6,"div",5),f(7,ct,3,1,"ng-container",6),a(8,"span",7),c(9),r()(),a(10,"mat-card-content")(11,"div",8),c(12,"Price: "),a(13,"strong"),c(14),r()(),a(15,"div",9),c(16),T(17,"slice"),r()(),a(18,"mat-card-actions")(19,"button",10),c(20,"Details"),r(),f(21,lt,10,2,"ng-container",11)(22,st,2,0,"ng-template",null,0,j),r()()),i&2){let t=e.$implicit,n=L(23),o=l();m(2),I(t.title),m(2),d("Author: ",t.author),m(3),p("ngForOf",E(13,at)),m(2),d("(",t.ratings.average_rating,"/5)"),m(5),d("$",t.price.amount),m(2),d("Description: ",t.description.length>100?$(17,9,t.description,0,100)+"...":t.description),m(3),p("routerLink",N(14,rt,t.ISBN)),m(2),p("ngIf",o.getBookQuantity(t)>0)("ngIfElse",n)}}var u=class i{constructor(e,t,n){this.http=e;this.snackBar=t;this.cartService=n}books=[];ngOnInit(){this.http.get("/book_data.json").subscribe(e=>{this.books=e})}getCart(){return this.cartService.getCart()}setCart(e){this.cartService.setCart(e)}addToCart(e){let t=this.getCart(),n=t.findIndex(o=>o.ISBN===e.ISBN);n>-1?t[n].quantity+=1:t.push({ISBN:e.ISBN,title:e.title,quantity:1,price:e.price}),this.setCart(t),this.snackBar.open(`${e.title} added to cart!`,"Close",{duration:2e3})}getBookQuantity(e){let n=this.getCart().find(o=>o.ISBN===e.ISBN);return n?n.quantity:0}incrementBook(e){let t=this.getCart(),n=t.findIndex(o=>o.ISBN===e.ISBN);n>-1&&(t[n].quantity+=1,this.setCart(t),this.snackBar.open(`Increased quantity of ${e.title}`,"Close",{duration:1500}))}decrementBook(e){let t=this.getCart(),n=t.findIndex(o=>o.ISBN===e.ISBN);n>-1&&(t[n].quantity>1?(t[n].quantity-=1,this.setCart(t),this.snackBar.open(`Decreased quantity of ${e.title}`,"Close",{duration:1500})):(t.splice(n,1),this.setCart(t),this.snackBar.open(`${e.title} removed from cart!`,"Close",{duration:1500})))}removeBook(e){let t=this.getCart(),n=t.findIndex(o=>o.ISBN===e.ISBN);n>-1&&(t.splice(n,1),this.setCart(t),this.snackBar.open(`${e.title} removed from cart!`,"Close",{duration:1500}))}static \u0275fac=function(t){return new(t||i)(C(V),C(tt),C(nt))};static \u0275cmp=O({type:i,selectors:[["app-book-list"]],decls:2,vars:1,consts:[["addToCartBtn",""],[1,"book-list-container"],["class","book-card",4,"ngFor","ngForOf"],[1,"book-card"],["mat-card-image","","src","generic-book-cover.jpg","alt","Book Cover"],[1,"rating-display"],[4,"ngFor","ngForOf"],[1,"rating-number"],["matLine",""],[1,"book-description"],["mat-raised-button","","color","accent",3,"routerLink"],[4,"ngIf","ngIfElse"],["color","warn"],["mat-mini-fab","","color","primary","aria-label","Decrease quantity",3,"click"],[1,"cart-qty-number"],["mat-mini-fab","","color","primary","aria-label","Increase quantity",3,"click"],["mat-mini-fab","","color","warn","aria-label","Remove from cart",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn","aria-label","Remove from cart",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,n){t&1&&(a(0,"div",1),f(1,pt,24,16,"mat-card",2),r()),t&2&&(m(),p("ngForOf",n.books))},dependencies:[h,y,H,J,A,K,G,Q,X,U,W,Z,Y,M,D,b,q,F,R,et,z],styles:[".book-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;justify-content:center}.book-actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.book-title[_ngcontent-%COMP%]{font-weight:600;font-size:1.1em}.book-author[_ngcontent-%COMP%]{color:#555;font-size:.95em}.book-description[_ngcontent-%COMP%]{color:#777;font-size:.92em;margin-top:2px}.book-list-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px;justify-content:flex-start;margin-top:24px;margin-left:24px}.book-card[_ngcontent-%COMP%]{max-width:320px;min-height:250px;display:flex;flex-direction:column;justify-content:space-between}.book-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{padding-top:18px;padding-left:15px;font-size:1.25em;font-weight:700;margin-bottom:4px}.book-card[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{padding-left:15px;margin-bottom:10px;color:#666;font-size:1em}.book-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;margin-bottom:10px}.book-card[_ngcontent-%COMP%]   [mat-card-image][_ngcontent-%COMP%]{margin:0 auto 10px;max-height:180px;object-fit:cover;border-radius:4px}.book-card[_ngcontent-%COMP%]   .book-description[_ngcontent-%COMP%]{color:#777;font-size:.97em;margin-top:10px;margin-bottom:8px;line-height:1.5}.book-card[_ngcontent-%COMP%]   [matLine][_ngcontent-%COMP%]{margin-top:6px;margin-bottom:2px;font-size:1.08em}.book-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;gap:10px;padding-left:15px;padding-bottom:12px;margin-top:8px}.rating-display[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:8px 0;gap:6px}.rating-display[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;vertical-align:middle;line-height:1}.rating-number[_ngcontent-%COMP%]{font-size:1.05em;margin-left:8px;display:flex;align-items:center;height:22px}.cart-qty-number[_ngcontent-%COMP%]{min-width:28px;display:inline-block;text-align:center;font-size:1.1em;font-weight:500}mat-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:120px;padding:12px 0}.book-card[_ngcontent-%COMP%]   .mat-mini-fab[_ngcontent-%COMP%]{width:30px;height:30px;min-width:30px;min-height:30px;font-size:1.1em}.book-card[_ngcontent-%COMP%]   .mat-mdc-mini-fab[_ngcontent-%COMP%]{width:30px;height:30px;min-width:30px;min-height:30px}"]})};var dt=[{path:"",component:u}],it=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=P({type:i});static \u0275inj=S({imports:[b,M.forChild(dt),h,y,u]})};export{it as BookListModule};
